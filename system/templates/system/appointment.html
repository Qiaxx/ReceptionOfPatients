{% extends 'basic.html' %}
{% load static %}

{% block title %}–ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/appointments.css' %}">
{% endblock %}

{% block content %}
<div class="min-h-screen bg-white">
  <header class="flex justify-between items-center px-5 py-4 border-b border-solid border-b-neutral-200">
    <img
      alt="–ö–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–æ–ª—å–Ω–∏—Ü–∞ 85 –ª–æ–≥–æ—Ç–∏–ø"
      src="{% static 'media/logo.png' %}"
      class="object-cover overflow-hidden w-56 aspect-[2.42]"
    />
    <div class="flex gap-2-5 items-center">
      <span class="text-stone-500">{{ patient.last_name }} {{ patient.first_name }} {{ patient.middle_name }}</span>
      <div class="w-10 h-10 bg-indigo-50 rounded-full"></div>
    </div>
  </header>

  <nav class="px-5 py-4 border-b border-solid border-b-neutral-200">
    <div class="flex gap-5">
      <a
        class="p-2 font-medium text-teal-600 no-underline active-nav-link"
        href=""
        aria-current="page"
      >
        –ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º
      </a>
      <a
        class="p-2 no-underline text-stone-500"
        href="#"
      >
        –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –∑–∞—è–≤–∫–∏
      </a>
      <a
        class="p-2 no-underline text-stone-500"
        href="#"
      >
        –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞
      </a>
    </div>
  </nav>

  <main class="px-5 py-8 mx-auto my-0 max-w-1200">
    <h1 class="mb-8 text-2xl font-normal text-zinc-800">
      –ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è
    </h1>

    <div class="flex gap-8 mb-8">
      <!-- Specialty Filter -->
      <div class="w-250">
        <div class="px-4 py-2-5 text-white bg-teal-600 rounded-2xl">
          –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å
        </div>
        <div
          class="specialty-list rounded-none border border-solid border-neutral-200 border-t-none"
        >
          <div
            class="specialty-item px-4 py-2-5 cursor-pointer {% if not selected_specialty %}active{% endif %}"
            data-specialty=""
          >
            –í—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
          </div>
          {% for specialty in specialties %}
          <div
            class="specialty-item px-4 py-2-5 cursor-pointer {% if selected_specialty == specialty %}active{% endif %}"
            data-specialty="{{ specialty }}"
          >
            {{ specialty }}
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- Doctor List -->
      <div class="flex-1">
        <form id="filter-form" method="get" action="" class="mb-5">
          <div class="flex gap-4 mb-5">
            <div class="relative flex-1">
              <label
                for="doctor-search"
                class="overflow-hidden absolute p-0 -m-px w-px h-px border-0"
              >
                –ü–æ–∏—Å–∫ –≤—Ä–∞—á–∞ –ø–æ –§–ò–û
              </label>
              <input
                id="doctor-search"
                name="search"
                type="search"
                placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û –≤—Ä–∞—á–∞"
                aria-label="–ü–æ–∏—Å–∫ –≤—Ä–∞—á–∞ –ø–æ –§–ò–û"
                class="px-4 py-2-5 pl-10 w-full text-base rounded border border-solid border-neutral-200"
                value="{{ search_query }}"
              />
              <div class="absolute top-2/4 -translate-y-2/4 left-15 text-stone-500">
                üîç
              </div>
            </div>
          </div>

          <input type="hidden" name="specialty" id="specialty-input" value="{{ selected_specialty }}">
          <input type="hidden" name="sort" id="sort-input" value="{{ sort_by }}">
        </form>

        <div class="flex gap-4 mb-8">
          <button
            class="sort-btn pb-1-5 no-underline cursor-pointer border-none {% if sort_by == 'date' %}active{% endif %}"
            data-sort="date"
          >
            –ø–æ –¥–∞—Ç–µ –ø—Ä–∏–µ–º–∞
          </button>
        </div>

        <div class="flex flex-col gap-5">
          {% for doctor in doctors %}
          <div class="flex gap-5 p-5 rounded border border-solid border-neutral-200">
            {% if doctor.photo %}
              <img
                class="object-cover overflow-hidden rounded aspect-square h-120 w-120"
                src="{{ doctor.photo.url }}"
                alt="{{ doctor.last_name }} {{ doctor.first_name }}"
              />
            {% else %}
              <div class="h-120 w-120 bg-neutral-200 rounded flex items-center justify-center text-stone-400">
                –ù–µ—Ç —Ñ–æ—Ç–æ
              </div>
            {% endif %}
            <div class="flex-1">
              <h2 class="mb-1-5 text-lg text-teal-600">
                {{ doctor.last_name }} {{ doctor.first_name }} {{ doctor.middle_name }}
              </h2>
              <p class="mb-1-5 text-stone-500">{{ doctor.specialization }}</p>
              <p class="mb-4 text-stone-500">
                <span>–°—Ç–∞–∂: </span>
                <span>{{ doctor.experience_years }} –ª–µ—Ç</span>
              </p>
              <div class="flex gap-8 mb-4">
                <div>
                  <div class="text-stone-500"></div>
                  <div>
                    <span></span>
                    <span></span>
                  </div>
                </div>
              </div>
              <form action="{% url 'system:appointment' doctor.id %}" method="get">
              <button
                class="schedule-btn px-5 py-2 text-teal-600 bg-white rounded border border-teal-600 border-solid cursor-pointer"
                data-doctor-id="{{ doctor.id }}"
                aria-label="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º –∫ –≤—Ä–∞—á—É {{ doctor.last_name }} {{ doctor.first_name }}"
              >
                –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º
              </button>
              </form>
{#              <div class="calendar-container hidden mt-4" data-doctor-id="{{ doctor.id }}"></div>#}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </main>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/appointments.js' %}"></script>
{% endblock %}
